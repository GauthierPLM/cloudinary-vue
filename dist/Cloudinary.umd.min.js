(function(t,n){"object"===typeof exports&&"object"===typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):"object"===typeof exports?exports["Cloudinary"]=n():t["Cloudinary"]=n()})("undefined"!==typeof self?self:this,function(){return function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s="fb15")}({1750:function(t,n){t.exports=require("core-js/modules/es6.symbol")},"25fc":function(t,n){t.exports=require("core-js/modules/es6.function.name")},"2a3b":function(t,n){t.exports=require("core-js/library/fn/is-iterable")},"2c92":function(t,n){t.exports=require("core-js/modules/es6.array.iterator")},"3c59":function(t,n){t.exports=require("cloudinary-core")},4685:function(t,n){t.exports=require("core-js/modules/es7.symbol.async-iterator")},4764:function(t,n){t.exports=require("core-js/library/fn/array/is-array")},"4d40":function(t,n){t.exports=require("core-js/library/fn/object/define-property")},"5d58":function(t,n,e){t.exports=e("8079")},"67bb":function(t,n,e){t.exports=e("bea1")},"6e74":function(t,n){t.exports=require("core-js/modules/es6.object.keys")},"774e":function(t,n,e){t.exports=e("afb5")},8079:function(t,n){t.exports=require("core-js/library/fn/symbol/iterator")},"80a8":function(t,n){t.exports=require("core-js/modules/web.dom.iterable")},"85f2":function(t,n,e){t.exports=e("4d40")},a745:function(t,n,e){t.exports=e("4764")},afb5:function(t,n){t.exports=require("core-js/library/fn/array/from")},bea1:function(t,n){t.exports=require("core-js/library/fn/symbol")},c8bb:function(t,n,e){t.exports=e("2a3b")},dc65:function(t,n){t.exports=require("current-script-polyfill")},f61e:function(t,n){t.exports=require("core-js/modules/es6.array.sort")},fb15:function(t,n,e){"use strict";e.r(n);var r,i={};(e.r(i),e.d(i,"install",function(){return Ut}),"undefined"!==typeof window)&&(e("dc65"),(r=window.document.currentScript)&&(r=r.src.match(/(.+\/)[^\/]+\.js(\?.*)?$/))&&(e.p=r[1]));e("2c92"),e("6e74");var o=e("5d58"),s=e.n(o),u=e("67bb"),a=e.n(u);function c(t){return c="function"===typeof a.a&&"symbol"===typeof s.a?function(t){return typeof t}:function(t){return t&&"function"===typeof a.a&&t.constructor===a.a&&t!==a.a.prototype?"symbol":typeof t},c(t)}function l(t){return l="function"===typeof a.a&&"symbol"===c(s.a)?function(t){return c(t)}:function(t){return t&&"function"===typeof a.a&&t.constructor===a.a&&t!==a.a.prototype?"symbol":c(t)},l(t)}e("25fc"),e("80a8");function f(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var d=e("85f2"),p=e.n(d);function h(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),p()(t,r.key,r)}}function y(t,n,e){return n&&h(t.prototype,n),e&&h(t,e),t}var m=function(){function t(){f(this,t),this.listeners=[]}return y(t,[{key:"next",value:function(t){this.listeners.forEach(function(n){return"next"in n&&n.next?n.next(t):null})}},{key:"error",value:function(t){this.listeners.splice(0).forEach(function(n){return"error"in n&&n.error?n.error(t):null})}},{key:"complete",value:function(){this.listeners.splice(0).forEach(function(t){return"complete"in t&&t.complete?t.complete():null})}},{key:"subscribe",value:function(t){var n=this;return t&&"object"===l(t)&&this.listeners.push(t),function(){var e=n.listeners.indexOf(t);e>=0&&n.listeners.splice(e,1)}}}]),t}(),b=function(){function t(n){f(this,t),this.lastValue=n,this.channel=new m}return y(t,[{key:"next",value:function(t){if(this.lastValue!==t){var n="function"===typeof t?t(this.lastValue):t;return this.lastValue=n,this.channel.next(n)}}},{key:"error",value:function(t){return this.channel.error(t)}},{key:"complete",value:function(){return this.channel.complete()}},{key:"subscribe",value:function(t){return t&&"object"===l(t)&&t.next&&t.next(this.lastValue),this.channel.subscribe(t)}},{key:"get",value:function(){return this.lastValue}}]),t}(),v=e("3c59");function g(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return v["Util"].assign.apply(v["Util"],[{}].concat(n))}function w(t,n){var e={};return e[t]=n,e}function x(t,n){return null==t||0===Object.keys(n).length?t:Object.keys(t).reduce(function(e,r){return g(e,w(r,r in n?n[r](t[r]):t[r]))},{})}function O(t){return null==t?t:t instanceof Array?t.reduce(function(t,n){return null!=n&&t.push(n),t},[]):Object.keys(t).reduce(function(n,e){return void 0!==t[e]&&(n[e]=t[e]),n},{})}function C(t,n){return null==t?t:Object.keys(t).reduce(function(e,r){return(n||[]).indexOf(r)<0?g(e,w(r,t[r])):e},{})}function j(t,n){if(null==t)return t;if(!n||!n.length)return{};for(var e={},r=0;r<n.length;r++){var i=n[r];i in t&&(e[i]=t[i])}return e}function S(t){return(t||[]).reduce(function(t,n){return t.indexOf(n)<0?t.concat([n]):t},[])}function $(t,n){return(t||[]).concat(n||[])}function _(t,n){if(null===t&&null===n||void 0===t&&void 0===n)return!0;if(null==t&&null==n||null==t||null==n)return!1;if("object"===l(t)&&"object"===l(n)){var e=Object.keys(t),r=Object.keys(n);if(e.length!==r.length)return!1;var i=S($(e,r));if(i.length!==e.length)return!1;for(var o=0;o<i.length;o++){var s=i[o];if(!_(t[s],n[s]))return!1}return!0}return t===n}function T(t,n){var e=null;return function(){var r=this,i=Array.prototype.slice.call(arguments,0);clearTimeout(e),e=setTimeout(function(){t.apply(r,i)},n)}}function A(t,n){if(!(t instanceof Array))throw new Error("find 1st arg must be Array, is: ".concat(l(t)));for(var e=0,r=t.length;e<r;e++)if(n(t[e]))return t[e]}function k(t,n,e){for(var r=[],i=t;i<=n;i+=e)r.push(i);return r}var z=e("a745"),I=e.n(z);function V(t){if(I()(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}var q=e("774e"),E=e.n(q),L=e("c8bb"),M=e.n(L);function R(t){if(M()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return E()(t)}function P(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function U(t){return V(t)||R(t)||P()}var B=v["Configuration"].CONFIG_PARAMS.map(v["Util"].camelCase),F=v["Transformation"].methods;function N(t){return v["Util"].withSnakeCaseKeys(x(O(j(t,B)),{secure:function(t){return"boolean"===typeof t?t:"true"===t}}))}function G(t){return v["Util"].withSnakeCaseKeys(O(j(t,F)))}function D(t){return O(C(t,F.concat(B)))}var H,K,X={name:"CldTransformation",inheritAttrs:!1,render:function(){return console.error("<cld-transformation /> should be a immediate descendant of cld-(image|video|poster)"),null}},J=X;function Q(t,n,e,r,i,o,s,u){var a,c="function"===typeof t?t.options:t;if(n&&(c.render=n,c.staticRenderFns=e,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),s?(a=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},c._ssrRegister=a):i&&(a=u?function(){i.call(this,this.$root.$options.shadowRoot)}:i),a)if(c.functional){c._injectStyles=a;var l=c.render;c.render=function(t,n){return a.call(n),l(t,n)}}else{var f=c.beforeCreate;c.beforeCreate=f?[].concat(f,a):[a]}return{exports:t,options:c}}var W,Y,Z=Q(J,H,K,!1,null,null,null),tt=Z.exports,nt={name:"CldPoster",inheritAttrs:!1,render:function(){return console.error("<cld-poster /> should be a immediate descendant of cld-video"),null}},et=nt,rt=Q(et,W,Y,!1,null,null,null),it=rt.exports;function ot(t){return null==t?[]:t.filter(function(t){return!(t.componentOptions&&(t.componentOptions.Ctor.options.render===tt.render||t.componentOptions.Ctor.options.render===it.render))})}var st,ut,at={inject:{cldOptionsState:{default:function(){return this.cldGlobalContextState}}},data:function(){return{cldOptions:{}}},created:function(){var t=this;this.cldOptionsState&&(this.cldOptionsStateSubCancel=this.cldOptionsState.subscribe({next:function(n){t.cldOptions=n}}))},destroyed:function(){this.cldOptionsStateSubCancel&&this.cldOptionsStateSubCancel()}},ct={mixins:[at],computed:{configuration:function(){return g(this.cldOptions.configuration,N(this.$attrs))},contextTransformation:function(){return this.cldOptions.transformation||[]},ownTransformation:function(){return G(this.$attrs)},ownChildTransformations:function(){return this.$slots&&this.$slots.default&&this.$slots.default.length?O(this.$slots.default.map(function(t){return t.componentOptions&&t.componentOptions.Ctor.options.render===tt.render?G(t.data.attrs):null})):[]},transformation:function(){return[].concat(U(this.contextTransformation),[this.ownTransformation],U(this.ownChildTransformations)).filter(function(t){return"object"===l(t)&&t&&Object.keys(t).length})}}},lt={name:"CldContext",inheritAttrs:!1,mixins:[ct],provide:function(){return{cldOptionsState:this.nextCldOptionsState}},render:function(t){return t("div",{class:{"cld-context":!0},attrs:D(this.$attrs)},ot(this.$slots.default))},data:function(){return{nextCldOptionsState:new b({})}},methods:{postOptions:function(){this.nextCldOptionsState.next({configuration:this.configuration,transformation:this.transformation})}},created:function(){this.postOptions()},updated:function(){this.postOptions()},destroyed:function(){this.nextCldOptionsState.complete()}},ft=lt,dt=Q(ft,st,ut,!1,null,null,null),pt=dt.exports;function ht(t,n){if(t)return A([t].concat(U(t.transformation||[])),n)}function yt(t){return"function"===typeof t?t():"string"===typeof t?JSON.parse(("["===t.slice(0,1)?"":"[")+t+("]"===t.slice(0,1)?"":"]")):t}e("f61e");function mt(t,n){return t.concat([]).sort(function(t,n){return t-n}).filter(function(t){return t>=n}).concat(stop)[0]}function bt(t){switch(t){case"height":return{display:"block",height:"100%",width:"auto"};case!0:case"width":return{display:"block",width:"100%"};case"fill":return{display:"block",width:"100%",height:"100%"};default:return{}}}function vt(t,n,e){if(!n)return{};switch(t){case"fill":return G(g(gt(),{crop:"fill"},n?e?{width:Math.floor(mt(e,n.width)),height:Math.floor(n.height/n.width*mt(e,n.width))}:{width:Math.floor(n.width),height:Math.floor(n.height)}:{width:0,height:0}));case!0:case"width":return G(g(gt(),{crop:"scale",width:Math.floor(n?e?mt(e,n.width):n.width:0)}));case"height":return G(g(gt(),{crop:"scale",height:Math.floor(n?e?mt(e,n.height):n.height:0)}));default:return{}}}function gt(){return"devicePixelRatio"in window?{dpr:window.devicePixelRatio}:{}}var wt={lqip:[{variables:[["$nh","ih"],["$nw","iw"]],crop:"scale",width:"20",quality:"auto"},{crop:"scale",width:"$nw",height:"$nh"}],color:[{variables:[["$nh","ih"],["$nw","iw"]],crop:"scale",width:"1",quality:"1"},{crop:"scale",width:"$nw",height:"$nh"}],pixelate:[{effect:"pixelate:100"}]};function xt(t,n,e,r){return"string"===typeof t?t in wt?v["Cloudinary"].new(e).url(n,g(r,{transformation:[].concat(U(r.transformation||[]),U(wt[t]))})):t:""}e("4685"),e("1750");var Ot={props:{},data:function(){return{size:null}},computed:{shouldMeasureSize:function(){return!1}},methods:{updateSizeObservation:function(){var t=this;this.shouldMeasureSize?this.$el&&!this.cancelSizeListener&&(this.cancelSizeListener=Ct(this.$el,function(n){var e=j(t.size,["width","height"]),r=j(n,["width","height"]);_(e,r)||(t.size=r)})):this.cancelSizeListener&&this.cancelSizeListener()}},created:function(){this.updateSizeObservation()},updated:function(){this.updateSizeObservation()},mounted:function(){this.updateSizeObservation()},destroyed:function(){this.cancelSizeListener&&this.cancelSizeListener()}};function Ct(t,n){var e=T(n,150),r=!1;if("object"===("undefined"===typeof window?"undefined":l(window))){if("ResizeObserver"in window){var i=new ResizeObserver(function(t){var n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=o.value,a=j(u.contentRect,["width","height"]);e(a)}}catch(c){r=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}});return i.observe(t),function(){r||(r=!0,i.disconnect())}}var o=function(){var n=t.getBoundingClientRect?j(t.getBoundingClientRect(),["width","height"]):{width:0,height:0};e(n)};return window.addEventListener("resize",o),o(),function(){r||(r=!0,window.removeEventListener("resize",o))}}}var jt={props:{lazy:{type:Boolean,default:!1}},data:function(){return{visible:!1}},methods:{updateVisibilityObservation:function(){var t=this;if(this.lazy)this.$el&&!this.cancelVisibilityListener&&(this.cancelVisibilityListener=St(this.$el,function(n){t.visible=t.visible||n}));else if(this.visible=!0,this.cancelVisibilityListener){var n=this.cancelVisibilityListener;this.cancelVisibilityListener=null,n()}}},created:function(){this.updateVisibilityObservation()},mounted:function(){this.updateVisibilityObservation()},updated:function(){this.updateVisibilityObservation()},destroyed:function(){this.cancelVisibilityListener&&this.cancelVisibilityListener()}};function St(t,n){if("object"===("undefined"===typeof window?"undefined":l(window))&&"IntersectionObserver"in window){var e=new IntersectionObserver(function(e){e.forEach(function(e){e.target===t&&n(e.isIntersecting)})},{threshold:[0,.01]});return e.observe(t),function(){e.disconnect()}}return n(!0),$t}function $t(){}var _t,Tt,At,kt,zt={name:"CldImage",inheritAttrs:!1,mixins:[Ot,jt,ct],render:function(t){return t("img",this.imageAttrs,ot(this.$slots.default))},props:{publicId:{type:String,default:"",required:!0},progressive:{type:Boolean,default:!1},placeholder:{type:String,default:""},responsive:{type:[Boolean,String],default:!1},breakpoints:{type:[Array,Function,String],default:function(){return k(100,4e3,100)}}},computed:{imageAttrs:function(){var t={"cld-image":!0};if(!this.publicId||ht(this.transformation,function(t){return 0===t.width||0===t.height})||this.responsive&&!this.size)return{class:t,style:bt(this.responsive),attrs:D(this.$attrs)};if(this.lazy&&!this.visible){var n=xt(this.placeholder,this.publicId,this.configuration,this.transformation);return{class:t,style:bt(this.responsive),attrs:g(D(this.$attrs),n?{src:n}:{})}}var e=v["Cloudinary"].new(this.configuration).url(this.publicId,{transformation:[].concat(U(this.transformation),[vt(this.responsive,this.size,yt(this.breakpoints))],U(this.progressive?[{flags:["progressive"]}]:[]))}),r=v["Transformation"].new(this.ownTransformation).toHtmlAttributes();return{class:t,style:bt(this.responsive),attrs:g(D(this.$attrs),r,e?{src:e}:{})}},shouldMeasureSize:function(){return!this.responsive}}},It=zt,Vt=Q(It,_t,Tt,!1,null,null,null),qt=Vt.exports,Et={name:"CldVideo",inheritAttrs:!1,mixins:[jt,ct],render:function(t){return t("video",this.videoAttrs,this.sources.map(function(n){return t("source",{key:n.mimeType,attrs:n})}).concat(ot(this.$slots.default)))},props:{publicId:{type:String,default:"",required:!0},sourceTypes:{type:Object,default:function(){return g.apply(void 0,U(v["Cloudinary"].DEFAULT_VIDEO_PARAMS.source_types.map(function(t){return w(t,{})})))}}},computed:{videoAttrs:function(){var t={"cld-video":!0};if(!this.publicId||ht(this.transformation,function(t){return 0===t.width||0===t.height}))return{class:t};var n=g({poster:this.poster},v["Transformation"].new(this.ownTransformation).toHtmlAttributes());return{class:t,attrs:g(D(this.$attrs),n)}},sources:function(){var t=this;return!this.publicId||this.lazy&&!this.visible?[]:Object.keys(this.sourceTypes).map(function(n){var e=g(t.configuration,N(t.sourceTypes[n]||{})),r=t.transformation.transformation||[],i=Array.isArray(t.sourceTypes[n])?t.sourceTypes[n].map(G):[G(t.sourceTypes[n]||{})],o=[].concat(U(t.transformation),U(r),U(i)),s=v["Cloudinary"].new(e).url(t.publicId,{resource_type:"video",format:n,transformation:o}),u="video/"+("ogv"===n?"ogg":n),a=D(t.sourceTypes[n]||{});return g(a,{mimeType:u,src:s})})},poster:function(){if(this.$attrs.poster&&"string"===typeof this.$attrs.poster)return this.$attrs.poster;if(this.$attrs.poster&&"object"===l(this.$attrs.poster))return v["Cloudinary"].new(g(this.configuration,N(this.$attrs.poster))).url(this.$attrs.poster.publicId||this.publicId,g(this.$attrs.poster.publicId?{resource_type:"image"}:{resource_type:"video",format:"jpeg"},this.transformation,{transformation:[].concat(U(this.transformation.transformation?this.transformation.transformation:[]),U((Array.isArray(this.$attrs.poster)?this.$attrs.poster:[this.$attrs.poster]).map(G)))}));var t=this.$slots.default?A(this.$slots.default,function(t){return t.componentOptions&&t.componentOptions.Ctor.options.render===it.render}):null;if(t){var n=G(t.data&&t.data.attrs||{}),e=(t.data&&t.data.attrs||{}).publicId,r=(t.componentOptions.children||[]).filter(function(t){return t.componentOptions&&t.componentOptions.Ctor.options.render===tt.render});return v["Cloudinary"].new(g(this.configuration,N(n))).url(e||this.publicId,g(e?{resource_type:"image"}:{resource_type:"video",format:"jpeg"},n,{transformation:[].concat(U(n.transformation||[]),U(r.map(function(t){return G(t.data&&t.data.attrs||{})})))}))}return v["Cloudinary"].new(this.configuration).url(this.publicId,g({resource_type:"video",format:"jpeg"},this.transformation))}}},Lt=Et,Mt=Q(Lt,At,kt,!1,null,null,null),Rt=Mt.exports,Pt=[pt,qt,Rt];function Ut(t,n){if(t.CldInstalled)throw new Error("Cloudinary plugin already installed");t.CldInstalled=!0,n=n||{},Pt.forEach(function(e){var r=Bt(n.components,e.name);null!=r&&t.component(r,e)}),n.configuration&&(t.prototype.cldGlobalContextState=new b({configuration:N(n.configuration)}))}function Bt(t,n){if(!t)return n;if(Array.isArray(t)){var e=A(t,function(t){return"string"===typeof t&&t===n||"object"===l(t)&&null!=t&&t.name===n});return null==e?null:"string"===typeof e?e:e.name}if("boolean"===typeof t[n])return!0===t[n]?n:null;if("string"===typeof t[n])return t[n];var r=A(Object.keys(t),function(e){return"string"===typeof t[e]&&t[e]===n||"object"===l(t[e])&&null!=t[e]&&t[e].name===n});return void 0===r?null:r}var Ft={CldContext:pt,CldImage:qt,CldVideo:Rt};e.d(n,"plugin",function(){return i}),e.d(n,"components",function(){return Ft}),e.d(n,"CldContext",function(){return pt}),e.d(n,"CldImage",function(){return qt}),e.d(n,"CldVideo",function(){return Rt});n["default"]=i}})});
//# sourceMappingURL=Cloudinary.umd.min.js.map